var tabView=null;
$(document).ready(function(){window.location.hash?showoptions(window.location.hash.substring(1).split("show-")[1]):showoptions("pyrt");$("ol.sidebar-list > li").bind("click",function(a){nam=a.target.id.split("-tab")[0];showoptions(nam)});$("input").bind("keyup",function(a){"pyrt-newpass"!=a.target.id&&"pyrt-newpassconf"!=a.target.id&&"pyrt-oldpass"!=a.target.id&&(""==a.target.value?($(a.target).removeClass("badinput goodinput warninginput"),$("#"+a.target.id+"error").html("")):verify(a.target.id,a.target.value))}).bind("change",
function(a){"general-movecheck"==a.target.id?($(a.target).addClass("goodinput"),1==a.target.checked?$(".general-moveto").show():$(".general-moveto").hide()):"general-stopcheck"==a.target.id?1==a.target.checked?$("#general-stopat-parent").removeClass("hidden"):$("#general-stopat-parent").addClass("hidden"):""==a.target.value&&$(a.target).removeClass("badinput goodinput warninginput")});$(".submit-box").bind("click",function(a){elems=$("."+a.target.id.split("-")[0]+"-config.goodinput");keys=[];values=
[];for(i=0;i<elems.length;i++)keys.push(elems[i].id),"general-movecheck"==elems[i].id?values.push(encodeURIComponent(elems[i].checked)):values.push(encodeURIComponent(elems[i].value));0<keys.length?$.ajax({url:"ajax?request=set_config_multiple&keys="+keys+"&values="+encodeURIComponent(values),success:function(a){refresh_page()}}):alert("Nothing to submit!")})});
function dragstart(a){a.dataTransfer.effectAllowed="move";a.dataTransfer.setData("Text",$(a.target).html());$("#tracker-info").html("Drag here to create a new group")}function dragover(a){a.preventDefault()}
function drop(a){a.preventDefault();a.dataTransfer.dropEffect="move";var c=$(a.target).closest(".tracker-div");a=a.dataTransfer.getData("Text");$.ajax({url:"ajax?request=move_tracker&url="+a+"&target_alias="+c.attr("id").split("tracker-")[1],success:function(a){"OK"==a?refresh_page():console.log(a)}})}function dragend(a){$("#tracker-info").html("Drag to group icons")}function dragoverInfo(a){a.preventDefault();$(a.target).css({color:"orange","font-weight":"bold"})}
function dragleaveInfo(a){a.preventDefault();$(a.target).css({color:"","font-weight":""})}function dropInfo(a){a.preventDefault();a.dataTransfer.dropEffect="move";console.log("Dropped into info box");$(a.target).css({color:"","font-weight":""});a=a.dataTransfer.getData("Text");$.ajax({url:"ajax?request=move_tracker&url="+a+"&target_alias=null",success:function(a){"OK"==a?refresh_page():console.log(a)}})}
function showoptions(a){$(".selected").each(function(){"tab_options"!==this.id&&$(this).removeClass("selected")});-1=="pyrt general throttle network performance trackers".split(" ").indexOf(a)&&(a="pyrt");tabView=a;$("#"+a+"-tab").addClass("selected");$("#"+a).parent().addClass("selected")}
function verify(a,c){$.ajax({url:"ajax?request=verify_conf_value&key="+a+"&value="+encodeURIComponent(c),success:function(b){verif=b.substr(0,8);respo=b.substr(9,2);msg=b.substr(12);console.log(b);"RESPONSE"===verif&&"OK"==respo?($("#"+a).removeClass("badinput warninginput").addClass("goodinput"),$("#"+a+"error").html("")):"RESPONSE"===verif&&"NO"==respo?(console.log($("#"+a)),$("#"+a).removeClass("goodinput warninginput").addClass("badinput"),$("#"+a+"error").html(msg)):($("#"+a).removeClass("goodinput badinput").addClass("warninginput"),
$("#"+a+"error").html("Unexpected response: "+b))}});return!1}function refresh_page(){window.location.hash="show-"+tabView;window.location.reload(window.location)};
