var ls=null;if(window.document.location.protocol=="https:")var socket_protocol="wss";else var socket_protocol="ws";var hiddenclasstypes=new Array();$(document).ready(function(){ls=new window.WebSocket(socket_protocol+"://"+window.document.location.host+"/logsocket");ls.onmessage=onMessage;ls.onerror=function(a){console.log("logSocket error",a,ls);};ls.onopen=function(a){console.log("logSocket opened",a,ls);};ls.onclose=function(a){console.log("logSocket closed",a,ls);};$(".log_control").bind("click",function(a){if($(this).hasClass("selected")){if($(this).attr("id")=="log_control_1"){$(".log_message.level_1").addClass("hidden_message");hiddenclasstypes.push("level_1");}else if($(this).attr("id")=="log_control_2"){$(".log_message.level_2").addClass("hidden_message");;hiddenclasstypes.push("level_2");}else if($(this).attr("id")=="log_control_3"){$(".log_message.level_3").addClass("hidden_message");hiddenclasstypes.push("level_3");}else if($(this).attr("id")=="log_control_4"){$(".log_message.level_4").addClass("hidden_message");hiddenclasstypes.push("level_4");}$(this).removeClass("selected");}else{if($(this).attr("id")=="log_control_1"){$(".log_message.level_1").removeClass("hidden_message");hiddenclasstypes.splice(hiddenclasstypes.indexOf("level_1"),1);}else if($(this).attr("id")=="log_control_2"){$(".log_message.level_2").removeClass("hidden_message");hiddenclasstypes.splice(hiddenclasstypes.indexOf("level_2"),1);}else if($(this).attr("id")=="log_control_3"){$(".log_message.level_3").removeClass("hidden_message");hiddenclasstypes.splice(hiddenclasstypes.indexOf("level_3"),1);}else if($(this).attr("id")=="log_control_4"){$(".log_message.level_4").removeClass("hidden_message");hiddenclasstypes.splice(hiddenclasstypes.indexOf("level_4"),1);}$(this).addClass("selected");}});});function getLatestID(){var a=$(".log_row:first-child");if(a.length)return "&lastID="+a.attr("id");else return "";}function onMessage(a){var b=$(a.data);for(i=0;i<hiddenclasstypes.length;i++)if(b.hasClass(hiddenclasstypes[i]))b.addClass("hidden_message");var c=$("#log_table");c.prepend(b);setTimeout(removeNew,2000);}function removeNew(){$(".new_message").each(function(){$(this).removeClass("new_message");});}